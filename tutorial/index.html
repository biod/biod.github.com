
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>BioD</title>
  <meta name="author" content="BioD">

  
  <meta name="description" content="Installing a D compiler The easiest way is to download the relevant DMD compiler for your platform and follow your
platform specific instructions to &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://biod.github.io/tutorial/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="BioD" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">BioD</a></h1>
  
    <h2>A library for computational biology & bioinformatics.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="biod.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>

  <li><a href="/tutorial/">Tutorial</a></li>
  
  <li><a href="/docs/">Documentation</a></li>
  
  <li><a href="/projects/">Projects</a></li>
  
  <li><a href="/publications/">Citations</a></li>
  
  <li><a href="/resources/">Get involved</a></li>
  
  <li><a href="/blog/">Blog</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article role="article">
  
  <h4>Installing a D compiler</h4>




<p>
The easiest way is to <a href="https://dlang.org/download.html" target="_blank">download the relevant DMD compiler</a> for your platform and follow your
platform specific instructions to install the precompiled binaries. Users on MacOS can use homebrew to install dmd or the ldc compilers.
</p>




<p>
You can use your favourite text editor to create a file hello.d, type the following code,

<figure class='code'><figcaption><span>print ready to use</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='D'><span class='line'><span class="k">import</span> <span class="n">std</span><span class="p">.</span><span class="n">stdio</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">writeln</span><span class="p">(</span><span class="s">&quot;I am ready to use BioD!&quot;</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

Compile and run the program

<figure class='code'><figcaption><span>compiling and running a D program with DMD</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>dmd hello.d  //compile it
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>./hello     // run the compiled program
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>I am ready to use BioD
</span></code></pre></td></tr></table></div></figure>

Congratulations, your D compiler is waiting for your instructions.  

</p>




<h4>Using BioD in your project</h4>




<p>
To take advantage of BioD in your project, you can include the library as a dependency using DUB, 
D's package management utility. However if you do not like DUB, you can clone the library into  your existing project directory 
and link to it during compiling step. For example,

<p>

</p>
</p>




<h4>Examples of using BioD</h4>


<ol>
<li>
<h5>Reading a BAM file</h5>

<figure class='code'><figcaption><span>Reading a BAM file </span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class='D'><span class='line'><span class="k">import</span> <span class="n">std</span><span class="p">.</span><span class="n">stdio</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">import</span> <span class="n">bio</span><span class="p">.</span><span class="n">std</span><span class="p">.</span><span class="n">hts</span><span class="p">.</span><span class="n">bam</span><span class="p">.</span><span class="n">reader</span><span class="p">;</span>
</span><span class='line'><span class="k">import</span> <span class="n">bio</span><span class="p">.</span><span class="n">std</span><span class="p">.</span><span class="n">hts</span><span class="p">.</span><span class="n">bam</span><span class="p">.</span><span class="n">pileup</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">auto</span> <span class="n">bam</span> <span class="p">=</span> <span class="k">new</span> <span class="n">BamReader</span><span class="p">(</span><span class="s">&quot;my_file.bam&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="k">auto</span> <span class="n">reads</span> <span class="p">=</span> <span class="n">bam</span><span class="p">[</span><span class="s">&quot;chr1&quot;</span><span class="p">][</span><span class="mi">150</span> <span class="p">..</span> <span class="mi">160</span><span class="p">];</span>
</span><span class='line'>    <span class="k">auto</span> <span class="n">pileup</span> <span class="p">=</span> <span class="n">makePileup</span><span class="p">(</span><span class="n">reads</span><span class="p">,</span><span class="kc">false</span><span class="p">,</span><span class="mi">155</span><span class="p">,</span> <span class="mi">158</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">foreach</span> <span class="p">(</span><span class="n">column</span><span class="p">;</span> <span class="n">pileup</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">writeln</span><span class="p">(</span><span class="s">&quot;Reference position: &quot;</span><span class="p">,</span> <span class="n">column</span><span class="p">.</span><span class="n">position</span><span class="p">);</span>
</span><span class='line'>        <span class="n">writeln</span><span class="p">(</span><span class="s">&quot;    Coverage: &quot;</span><span class="p">,</span> <span class="n">column</span><span class="p">.</span><span class="n">coverage</span><span class="p">);</span>
</span><span class='line'>        <span class="n">writeln</span><span class="p">(</span><span class="s">&quot;    Reads:&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">foreach</span> <span class="p">(</span><span class="n">read</span><span class="p">;</span> <span class="n">column</span><span class="p">.</span><span class="n">reads</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="n">writefln</span><span class="p">(</span><span class="s">&quot;%30s\t%s\t%.2d\t%s\t%2s/%2s\t%2s/%2s\t%10s\t%s %s&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="n">read</span><span class="p">.</span><span class="n">name</span><span class="p">,</span>
</span><span class='line'>            <span class="n">read</span><span class="p">.</span><span class="n">current_base</span><span class="p">,</span>
</span><span class='line'>            <span class="n">read</span><span class="p">.</span><span class="n">current_base_quality</span><span class="p">,</span>
</span><span class='line'>            <span class="n">read</span><span class="p">.</span><span class="n">cigar_operation</span><span class="p">,</span>
</span><span class='line'>            <span class="n">read</span><span class="p">.</span><span class="n">cigar_operation_offset</span> <span class="p">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">read</span><span class="p">.</span><span class="n">cigar_operation</span><span class="p">.</span><span class="n">length</span><span class="p">,</span>
</span><span class='line'>            <span class="n">read</span><span class="p">.</span><span class="n">query_offset</span> <span class="p">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">read</span><span class="p">.</span><span class="n">sequence</span><span class="p">.</span><span class="n">length</span><span class="p">,</span>
</span><span class='line'>            <span class="n">read</span><span class="p">.</span><span class="n">cigarString</span><span class="p">(),</span>
</span><span class='line'>            <span class="n">read</span><span class="p">.</span><span class="n">cigar_before</span><span class="p">,</span> <span class="n">read</span><span class="p">.</span><span class="n">cigar_after</span><span class="p">);</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>
Example output

<figure class='code'><figcaption><span>example output for a single position</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>Reference position: 155
</span><span class='line'>    Coverage: 11
</span><span class='line'>    Reads:
</span><span class='line'>        EAS221_3:4:30:1452:1563   A       <span class="m">27</span>      35M     35/35   35/35          35M      <span class="o">[]</span> <span class="o">[]</span>
</span><span class='line'>        EAS114_45:1:77:1000:1780  A       <span class="m">22</span>      35M     34/35   34/35          35M      <span class="o">[]</span> <span class="o">[]</span>
</span><span class='line'>        EAS114_45:4:48:310:473    A       <span class="m">24</span>      35M     34/35   34/35          35M      <span class="o">[]</span> <span class="o">[]</span>
</span><span class='line'>        B7_591:2:279:124:41       A       <span class="m">20</span>      36M     33/36   33/36          36M      <span class="o">[]</span> <span class="o">[]</span>
</span><span class='line'>        EAS112_32:8:89:254:332    A       <span class="m">26</span>      35M     33/35   33/35          35M      <span class="o">[]</span> <span class="o">[]</span>
</span><span class='line'>        B7_597:7:103:731:697      A       <span class="m">25</span>      35M     32/35   32/35          35M      <span class="o">[]</span> <span class="o">[]</span>
</span><span class='line'>        EAS139_11:2:71:83:58      A       <span class="m">27</span>      9M       9/ <span class="m">9</span>    9/35      9M2I24M      <span class="o">[]</span> <span class="o">[</span>2I, 24M<span class="o">]</span>
</span><span class='line'>        EAS192_3:4:63:5:870       A       <span class="m">27</span>      9M       9/ <span class="m">9</span>    9/35      9M2I24M      <span class="o">[]</span> <span class="o">[</span>2I, 24M<span class="o">]</span>
</span><span class='line'>        EAS139_19:2:29:1822:1881  A       <span class="m">27</span>      7M       7/ <span class="m">7</span>    7/40      7M2I31M      <span class="o">[]</span> <span class="o">[</span>2I, 31M<span class="o">]</span>
</span><span class='line'>        EAS221_3:2:100:1147:124   G       <span class="m">27</span>      35M      7/35    7/35          35M      <span class="o">[]</span> <span class="o">[]</span>
</span><span class='line'>        EAS192_3:8:6:104:118      G       <span class="m">27</span>      35M      3/35    3/35          35M      <span class="o">[]</span> <span class="o">[]</span>
</span></code></pre></td></tr></table></div></figure>

</li>

<li>

<h5>Reading multiple BAM files</h5>

<figure class='code'><figcaption><span>reading multiple bam files</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='D'><span class='line'><span class="k">import</span> <span class="n">bio</span><span class="p">.</span><span class="n">std</span><span class="p">.</span><span class="n">hts</span><span class="p">.</span><span class="n">bam</span><span class="p">.</span><span class="n">multireader</span><span class="p">;</span>
</span><span class='line'><span class="k">import</span> <span class="n">bio</span><span class="p">.</span><span class="n">std</span><span class="p">.</span><span class="n">hts</span><span class="p">.</span><span class="n">bam</span><span class="p">.</span><span class="n">read</span> <span class="p">:</span> <span class="n">compareCoordinates</span><span class="p">;</span>
</span><span class='line'><span class="k">import</span> <span class="n">bion</span><span class="p">.</span><span class="n">std</span><span class="p">.</span><span class="n">hts</span><span class="p">.</span><span class="n">bam</span><span class="p">.</span><span class="n">pileup</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">import</span> <span class="n">std</span><span class="p">.</span><span class="n">algorithm</span><span class="p">;</span>
</span><span class='line'><span class="k">import</span> <span class="n">std</span><span class="p">.</span><span class="n">conv</span><span class="p">;</span>
</span><span class='line'><span class="k">import</span> <span class="n">std</span><span class="p">.</span><span class="n">stdio</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="n">main</span><span class="p">(){</span>
</span><span class='line'> <span class="c1">// if the bam files can be merged, they can be transversed simultinously</span>
</span><span class='line'> <span class="k">auto</span> <span class="n">bam</span> <span class="p">=</span> <span class="k">new</span> <span class="n">MultiBamReader</span><span class="p">([</span><span class="s">&quot;../test/data/illu_20_chunk.bam&quot;</span><span class="p">,</span> <span class="s">&quot;../test/data/ion_20_chuck.bam&quot;</span><span class="p">]);</span>
</span><span class='line'> <span class="k">auto</span> <span class="n">pileup</span> <span class="p">=</span> <span class="n">makePileup</span><span class="p">(</span><span class="n">bam</span><span class="p">.</span><span class="n">reads</span><span class="p">,</span><span class="kc">true</span><span class="p">,</span><span class="mi">32_000_083</span><span class="p">,</span><span class="mi">32_000_089</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'> <span class="k">foreach</span><span class="p">(</span><span class="n">column</span><span class="p">;</span><span class="n">pileup</span><span class="p">)</span>
</span><span class='line'>    <span class="n">writeln</span><span class="p">(</span><span class="s">&quot;Column position: &quot;</span><span class="p">,</span> <span class="n">column</span><span class="p">.</span><span class="n">position</span><span class="p">);</span>
</span><span class='line'>    <span class="n">writeln</span><span class="p">(</span><span class="s">&quot;   Ref.base: &quot;</span><span class="p">,</span> <span class="n">column</span><span class="p">.</span><span class="n">reference_base</span><span class="p">);</span>
</span><span class='line'>    <span class="n">writeln</span><span class="p">(</span><span class="s">&quot;   Coverage: &quot;</span><span class="p">,</span> <span class="n">column</span><span class="p">.</span><span class="n">coverage</span><span class="p">);</span>
</span><span class='line'> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>
Expected output 

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>Column position: 32000083
</span><span class='line'>    Ref.base: G
</span><span class='line'>    Coverage: 23
</span><span class='line'> Column position: 32000084
</span><span class='line'>     Ref.base: C
</span><span class='line'>     Coverage: 23
</span><span class='line'> Column position: 32000085
</span><span class='line'>     Ref.base: C
</span><span class='line'>     Coverage: 23
</span><span class='line'>  Column position: 32000086
</span><span class='line'>     Ref.base: C
</span><span class='line'>     Coverage: 24
</span><span class='line'>  Column position: 32000087
</span><span class='line'>     Ref.base: C
</span><span class='line'>     Coverage: 24
</span><span class='line'>  Column position: 32000088
</span><span class='line'>     Ref.base: T
</span><span class='line'>     Coverage: 24
</span></code></pre></td></tr></table></div></figure>
  </li>

</ol>




  
    <footer>
      
      
        <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://biod.github.io/tutorial/index.html" data-via="" data-counturl="http://biod.github.io/tutorial/index.html" >Tweet</a>
  
  
  
</div>

      
    </footer>
  
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2019 - BioD -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
